{% extends "_base.html" %}
{% block content %}

<style>
  .ig-wrap { max-width: 980px; margin: 0 auto; padding: 0 20px; }
  .ig-head {
    display:flex; align-items:center; justify-content:space-between;
    margin: 20px 0 12px;
  }
  .ig-title { font-weight: 800; font-size: 18px; }
  .ig-actions { display:flex; gap:8px; }
  .btn-chip {
    display:inline-flex; align-items:center; gap:6px;
    padding:8px 12px; border-radius:999px; border:1px solid #0d4221;
    color:#0d4221; text-decoration:none; font-size:14px;
  }
  .btn-chip:hover { background:#0d4221; color:#fff; }

  /* 인스타 그리드 */
  .ig-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 6px;
  }
  @media (max-width: 680px) {
    .ig-grid { grid-template-columns: repeat(3, 1fr); gap: 4px; }
  }

  /* 1:1 정사각형 칸 */
  .ig-cell {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;            /* 정사각형 */
    border-radius: 8px;
    overflow: hidden;
    background: #e9efe9;
  }
  .ig-img {
    width: 100%; height: 100%;
    object-fit: cover;               /* 크롭해서 꽉 채우기 */
    display: block;
    transition: transform .2s ease;
  }
  .ig-cell:hover .ig-img { transform: scale(1.02); }

  .ig-empty {
    text-align:center; color:#666; font-size:14px; padding:24px 0;
  }
</style>

<div class="container-narrow">
  <div class="topbar">
    <img class="logo-green" src="/static/logo.svg" alt="logo">
  </div>

  <div class="ig-wrap">
    <div class="ig-head">
      <div class="ig-title">추억의 사진들</div>
      <div class="ig-actions">
        <a class="btn-chip" href="{{ url_for('gallery_upload') }}">📤 사진 올리기</a>
        <a class="btn-chip" href="{{ url_for('guest_list') }}">📝 방명록으로</a>
        <a class="btn-chip" href="{{ url_for('index') }}">🏠 메인</a>
      </div>
    </div>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="mt-3" style="color:#0d4221;">
          {% for msg in messages %}
            <div>{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% if images and images|length > 0 %}
      <div class="ig-grid">
        {% for img in images %}
          <div class="ig-cell">
            <img class="ig-img" src="{{ img.url }}" alt="{{ img.name }}">
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="ig-empty">아직 사진이 없어요. 첫 사진을 업로드해 주세요! 😊</div>
    {% endif %}
  </div>
</div>

{% endblock %}