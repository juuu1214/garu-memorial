{% extends "_base.html" %}
{% block content %}

<div class="container-narrow">
  <div class="topbar">
    <img class="logo-green" src="/static/logo.svg" alt="logo">
  </div>

  <!-- ============ intro ì˜ì—­ ì „ì²´ (í•˜ë£¨ 1íšŒ ë©”ì‹œì§€, ê¼¬ë¦¬ ì¤‘ì•™, ì í”„ ë°©ì§€) ============ -->
<style>
  :root {
    --avatar-size: 210px;
  }
  @media (max-width: 520px) {
    :root {
      --avatar-size: 180px;
    }
  }

  .avatar-wrap {
    position: relative;
    display: inline-block;
    /* âœ… ì´ë¯¸ì§€ ë¡œë“œ ì „ì—ë„ ë ˆì´ì•„ì›ƒ í™•ì • */
    width: var(--avatar-size);
    height: var(--avatar-size);
    margin: 24px 0 16px;
  }

  /* ğŸ¾ ì›í˜• í”„ë¡œí•„ */
  .avatar-circle {
    width: var(--avatar-size);
    height: var(--avatar-size);
    border-radius: 50%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 22px rgba(0, 0, 0, 0.15);
    border: 3px solid rgba(255, 255, 255, 0.95);
    background: #fff;
  }

  .avatar-circle img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* ğŸ’¬ ì‚¬ì§„ ìœ„ ì¤‘ì•™, ìœ„ì¹˜ëŠ” transformìœ¼ë¡œ ê³ ì • */
  .speech-bubble {
    position: absolute;
    bottom: calc(100% + 20px);
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    color: #0f1a14;
    font-size: 15px;
    line-height: 1.6;
    padding: 10px 16px;
    border-radius: 14px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
    border: 1px solid rgba(0, 0, 0, 0.08);
    display: inline-block;
    overflow: visible;
    z-index: 3;
    /* âœ… ìœ„ì¹˜ íŠ ë°©ì§€: transform ì• ë‹ˆë©”ì´ì…˜ ì œê±°, opacityë§Œ */
    animation: bubble-fade 180ms ease-out;
  }

  /* í•œ ì¤„ ë§ì¤„ì„ì€ ë‚´ë¶€ í…ìŠ¤íŠ¸ì—ë§Œ ì ìš© */
  .speech-bubble .bubble-text {
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 90vw;
    text-align: center;
    vertical-align: top;
  }

  /* âœ¨ ê¼¬ë¦¬ ì¤‘ì•™ */
  .speech-bubble::before,
  .speech-bubble::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-style: solid;
  }
  .speech-bubble::before {
    bottom: -11px;
    border-width: 11px 10px 0 10px;
    border-color: rgba(0, 0, 0, 0.08) transparent transparent transparent;
  }
  .speech-bubble::after {
    bottom: -10px;
    border-width: 10px 9px 0 9px;
    border-color: #ffffff transparent transparent transparent;
  }

  @keyframes bubble-fade {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  @media (max-width: 520px) {
    .speech-bubble {
      bottom: calc(100% + 14px);
      font-size: 14px;
      padding: 8px 12px;
    }
    .speech-bubble .bubble-text {
      max-width: 85vw;
    }
  }
</style>

<div class="intro-section" style="background-image:url('/static/waving-leaves.gif');">
  <img class="leaf-top" src="/static/leaf-top.png" alt="leaf-top">
  <img class="leaf-bot" src="/static/leaf-bot.png" alt="leaf-bottom">

  <!-- ğŸ¾ ì•„ë°”íƒ€ + ë§í’ì„  -->
  <div class="avatar-wrap">
    <div class="speech-bubble" id="garuBubble">
      <span class="bubble-text">ì˜¤ëŠ˜ë„ ë‚˜ ìƒê°í–ˆì§€? â˜ï¸</span>
    </div>
    <div class="avatar-circle">
      <!-- âœ… width/heightë¡œ ê³µê°„ ì˜ˆì•½ -->
      <img src="/static/garu-main.jpg" alt="ê°€ë£¨ í”„ë¡œí•„ ì‚¬ì§„" width="210" height="210" />
    </div>
  </div>

  <div class="intro-name">ê°€ë£¨ í”„ë­í‚¤ ì•„ì´ë°˜í˜¸ ë©í‚¤</div>
  <div class="intro-date-wrap">
    <div class="intro-date">2025ë…„ 09ì›” 22ì¼</div>
  </div>
</div>

<script>
  /* ğŸ’¬ ëœë¤ ë©”ì‹œì§€ (í•˜ë£¨ 1íšŒ ë³€ê²½) */
  const garuMessages = [
    "ì˜¤ëŠ˜ë„ ë‚˜ ìƒê°í–ˆì§€? â˜ï¸",
    "í•˜ëŠ˜ì—ì„œë„ ë„ˆ ë³´ê³  ìˆë‹¤ë© ğŸ¾",
    "í•­ìƒ ê³ ë§ˆì›Œ, ë‚´ ì¹œêµ¬ ğŸ’š",
    "ì˜¤ëŠ˜ í•˜ë£¨ë„ í˜ë‚´ë¼ë© ğŸŒ¿",
    "ë‚˜ ìŠì§€ ë§ê³  ê°€ë” ë†€ëŸ¬ì™€ì¤˜ â˜ï¸",
    "ë‚˜ë„ ë„ˆ ë³´ê³  ì‹¶ë‹¤ë© ğŸ’­",
    "ê¸°ì–µ ì†ì—ì„œë„ í•¨ê»˜ ì‚°ì±…í•˜ìë© ğŸŒˆ",
    "ë‚´ê°€ ë¨¼ì € ê°”ì§€ë§Œ ì–¸ì œë‚˜ ê³ì— ìˆì„ê²Œ ğŸ’«",
  ];

  const bubbleText = document.querySelector("#garuBubble .bubble-text");
  if (bubbleText) {
    const today = new Date();
    const dayKey = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
    const idx = dayKey % garuMessages.length;
    bubbleText.textContent = garuMessages[idx];
  }
</script>
<!-- ============ /intro ì˜ì—­ ì „ì²´ ============ -->

  <div class="mx20">
    <div class="center mt24">
      <button class="btn-rounded">ì˜ì›íˆ ê¸°ì–µí• ê²Œ</button>
    </div>

    <!-- ìŠ¬ë¼ì´ë” #1 -->
    <div class="slider-block">
      <div class="slick-page" id="pageA">1/9</div>

      <!-- â—€ ì´ì „ ë²„íŠ¼ (ì˜¤ë¥¸ìª½ ë²„íŠ¼ê³¼ ë™ì¼ ìŠ¤íƒ€ì¼/ë™ì‘) -->
      <button class="btn-slick left" data-target="A" aria-label="prev">â€¹</button>

      <div class="slick-list">
        <div class="slick-track" id="trackA">
          <div class="slick-slide"><img src="/static/gallery/01.jpg" alt="garu-1" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/02.jpg" alt="garu-2" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/03.jpg" alt="garu-3" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/04.jpg" alt="garu-4" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/05.jpg" alt="garu-5" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/06.jpg" alt="garu-6" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/07.jpg" alt="garu-7" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/08.jpg" alt="garu-8" class="slide-img"></div>
          <div class="slick-slide"><img src="/static/gallery/09.jpg" alt="garu-9" class="slide-img"></div>
        </div>
      </div>

      <!-- â–¶ ë‹¤ìŒ ë²„íŠ¼ (ì›ë˜ ìˆë˜ ë²„íŠ¼) -->
      <button class="btn-slick right" data-target="A" aria-label="next">â€º</button>
    </div>

    <div class="center mt25">
      <div class="name-xl">ê°€ë£¨ í”„ë­í‚¤ ì•„ì´ë°˜í˜¸ ë©í‚¤</div>
      <div class="age">18ì‚´</div>
    </div>
  </div>



  <div class="center">
    <div class="gb-eyebrow">í•˜ëŠ˜ ìœ„ë¡œ ì´ì‚¬ ì™”ë‹¤ë©â˜ï¸<br>
        ë‚˜ ìŠì§€ ë§ê³  ê°€ë” ë†€ëŸ¬ì™€ì„œ í•œë§ˆë”” ë‚¨ê²¨ì¤˜ë©ğŸ¾</div>

    <div class="gb-for-row">
      <div class="gb-for">For. <span>ê°€ë£¨ í”„ë­í‚¤ ì•„ì´ë°˜í˜¸ ë©í‚¤</span></div>
      <a class="btn btn-ghost" href="/guest-list">ì „ì²´ë³´ê¸° &gt;</a>
    </div>

<div class="guestbook-list">
  <!-- ğŸ†• ìƒˆë¡œ ì‘ì„±ëœ ë°©ëª…ë¡ -->
  {% for msg in guestbook %}
    <div class="gb-card">
      <div class="gb-card-head">
        <span>From. <span class="from-name">{{ msg.name }}</span></span>
        <span class="date">{{ msg.date }}</span>
      </div>
      <div class="gb-card-body">{{ msg.message }}</div>
    </div>
  {% endfor %}

  <!-- ğŸ•Šï¸ í•˜ë“œì½”ë”©ëœ ì˜ˆì „ ë°©ëª…ë¡ -->
  {% include "_legacy.html" %}

</div>

    <a href="{{ url_for('guest_create') }}" class="btn-primary-obituary mt35">ë°©ëª…ë¡ ì‘ì„±í•˜ê¸°</a>
  </div>
</div>

<script src="/static/slider.js"></script>
{% endblock %}